{% extends 'management/base.html' %}
{% block title %}Reviews - Admin{% endblock %}
{% block content %}
<div class="max-w-full">
  <div class="flex justify-between items-center mb-8">
    <div>
      <h1 class="text-3xl font-bold text-gray-800">Reviews</h1>
      <p class="text-gray-500 mt-1">Manage course reviews</p>
    </div>
    <a href="{% url 'management:review_create' %}" class="inline-flex items-center gap-2 px-5 py-2.5 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium">
      <i class="fas fa-plus"></i>New Review
    </a>
  </div>

  <div class="bg-white rounded-xl shadow overflow-x-auto">
    <table class="w-full text-sm">
      <thead class="bg-gray-50 border-b">
        <tr>
          <th class="px-6 py-3 text-left font-semibold text-gray-700">Course</th>
          <th class="px-6 py-3 text-left font-semibold text-gray-700">Course</th>
          <th class="px-6 py-3 text-left font-semibold text-gray-700">Reviewer</th>
          <th class="px-6 py-3 text-center font-semibold text-gray-700">Rating</th>
          <th class="px-6 py-3 text-left font-semibold text-gray-700">Status</th>
          <th class="px-6 py-3 text-right font-semibold text-gray-700">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y">
        {% for review in reviews %}
        <tr class="hover:bg-gray-50">
          <td class="px-6 py-3 font-medium">{{ review.course.title|truncatewords:5 }}</td>
          <td class="px-6 py-3">{{ review.course.title|default:"-" }}</td>
          <td class="px-6 py-3">{{ review.student.get_full_name }}</td>
          <td class="px-6 py-3 text-center">{% for i in "12345" %}{% if forloop.counter <= review.rating %}<i class="fas fa-star text-yellow-400"></i>{% else %}<i class="fas fa-star text-gray-300"></i>{% endif %}{% endfor %}</td>
          <td class="px-6 py-3"><span class="px-2 py-1 text-xs font-medium rounded-full {% if review.is_approved %}bg-green-100 text-green-700{% else %}bg-gray-100 text-gray-700{% endif %}">{% if review.is_approved %}Approved{% else %}Pending{% endif %}</span></td>
          <td class="px-6 py-3 text-right text-xs">
            <a href="{% url 'management:review_edit' review.pk %}" class="text-primary-600 hover:text-primary-700 mr-2">Edit</a>
            <form method="post" action="{% url 'management:review_delete' review.pk %}" class="inline" onsubmit="return confirm('Delete?');">
              {% csrf_token %}
              <button class="text-red-600 hover:text-red-700">Delete</button>
            </form>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="px-6 py-8 text-center text-gray-500">No reviews found</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
