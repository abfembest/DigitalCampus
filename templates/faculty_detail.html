{% extends 'base.html' %}
{% load static %}

{% block meta_tags %}
<meta name="description" content="{{ faculty.meta_description|default:faculty.description|truncatechars:160 }}">
<meta name="keywords" content="{{ faculty.meta_keywords|default:faculty.name }}">
{% endblock %}

{% block og_tags %}
<meta property="og:title" content="{{ faculty.name }} | MIU">
<meta property="og:description" content="{{ faculty.description|truncatechars:200 }}">
<meta property="og:type" content="website">
{% endblock %}

{% block content %}

<!-- ════════════════════════════════════════════
     SECTION 1 — HERO (dark mesh gradient)
════════════════════════════════════════════ -->
<section class="hero-mesh relative overflow-hidden" aria-label="Faculty Overview">

  <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-purple-700 rounded-full opacity-10 blur-3xl pointer-events-none"></div>
  <div class="absolute bottom-0 left-10 w-80 h-80 bg-fuchsia-700 rounded-full opacity-8 blur-3xl pointer-events-none"></div>

  <div class="max-w-screen-2xl mx-auto px-6 lg:px-16 pt-24 lg:pt-32 pb-20">

    <nav aria-label="Breadcrumb" class="flex items-center gap-2 text-sm text-white/50 mb-10 fade-up fade-up-1">
      <a href="{% url 'eduweb:index' %}" class="hover:text-white/80 transition-colors">Home</a>
      <i data-lucide="chevron-right" class="w-3.5 h-3.5"></i>
      <a href="{% url 'eduweb:index' %}#faculties" class="hover:text-white/80 transition-colors">Faculties</a>
      <i data-lucide="chevron-right" class="w-3.5 h-3.5"></i>
      <span class="text-white/80">{{ faculty.name }}</span>
    </nav>

    <div class="flex flex-col lg:flex-row lg:items-end gap-10 lg:gap-16">

      <!-- Title -->
      <div class="flex-1 fade-up fade-up-2">
        <span class="inline-flex items-center gap-2 bg-white/10 border border-white/20 text-white/80 px-4 py-1.5 rounded-full text-xs font-semibold tracking-widest uppercase mb-6">
          <i data-lucide="{{ faculty.icon }}" class="w-3.5 h-3.5 text-purple-300"></i>
          {{ faculty.code }}
        </span>

        <h1 class="font-['Poppins'] text-4xl lg:text-6xl xl:text-7xl font-black text-white leading-[1.05] mb-5">
          {{ faculty.name }}
        </h1>

        {% if faculty.tagline %}
        <p class="text-white/60 text-lg lg:text-xl font-['Inter'] max-w-2xl leading-relaxed mb-8">
          {{ faculty.tagline }}
        </p>
        {% endif %}

        <div class="flex flex-wrap gap-3">
          <a href="{% url 'eduweb:apply' %}"
             class="inline-flex items-center gap-2 bg-[#840384] hover:bg-purple-600 text-white px-7 py-3.5 rounded-xl font-semibold text-sm transition-all shadow-lg shadow-purple-900/30 focus:outline-none focus:ring-2 focus:ring-purple-400">
            <i data-lucide="send" class="w-4 h-4"></i> Apply Now
          </a>
          <a href="#departments"
             class="inline-flex items-center gap-2 bg-white/10 hover:bg-white/20 border border-white/20 text-white px-7 py-3.5 rounded-xl font-semibold text-sm transition-all focus:outline-none focus:ring-2 focus:ring-white/40">
            <i data-lucide="layout-grid" class="w-4 h-4"></i> Browse Departments
          </a>
        </div>
      </div>

      <!-- Stats -->
      <div class="grid grid-cols-2 gap-4 lg:w-80 flex-shrink-0 fade-up fade-up-3">
        {% if faculty.student_count %}
        <div class="dept-card rounded-2xl p-5 text-center">
          <div class="stat-glow font-['Poppins'] text-3xl font-black text-purple-300">{{ faculty.student_count|floatformat:"0" }}+</div>
          <div class="text-white/50 text-xs mt-1 font-medium font-['Inter']">Students Enrolled</div>
        </div>
        {% endif %}
        {% if faculty.placement_rate %}
        <div class="dept-card rounded-2xl p-5 text-center">
          <div class="stat-glow font-['Poppins'] text-3xl font-black text-purple-300">{{ faculty.placement_rate }}%</div>
          <div class="text-white/50 text-xs mt-1 font-medium font-['Inter']">Placement Rate</div>
        </div>
        {% endif %}
        {% if departments.count %}
        <div class="dept-card rounded-2xl p-5 text-center">
          <div class="stat-glow font-['Poppins'] text-3xl font-black text-purple-300">{{ departments|length }}</div>
          <div class="text-white/50 text-xs mt-1 font-medium font-['Inter']">Departments</div>
        </div>
        {% endif %}
        {% if faculty.partner_count %}
        <div class="dept-card rounded-2xl p-5 text-center">
          <div class="stat-glow font-['Poppins'] text-3xl font-black text-purple-300">{{ faculty.partner_count }}+</div>
          <div class="text-white/50 text-xs mt-1 font-medium font-['Inter']">Industry Partners</div>
        </div>
        {% endif %}
      </div>
    </div>

    <!-- Mission & Vision — compact dark cards inside hero -->
    {% if faculty.mission or faculty.vision %}
    <div class="mt-12 grid sm:grid-cols-2 gap-5 fade-up fade-up-4">
      {% if faculty.mission %}
      <div class="dept-card rounded-2xl p-6">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-9 h-9 bg-purple-500/20 rounded-xl flex items-center justify-center">
            <i data-lucide="target" class="w-4 h-4 text-purple-300"></i>
          </div>
          <h3 class="font-['Poppins'] font-bold text-white/90 text-xs uppercase tracking-widest">Mission</h3>
        </div>
        <p class="text-white/55 font-['Inter'] text-sm leading-relaxed">{{ faculty.mission }}</p>
      </div>
      {% endif %}
      {% if faculty.vision %}
      <div class="dept-card rounded-2xl p-6">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-9 h-9 bg-purple-500/20 rounded-xl flex items-center justify-center">
            <i data-lucide="eye" class="w-4 h-4 text-purple-300"></i>
          </div>
          <h3 class="font-['Poppins'] font-bold text-white/90 text-xs uppercase tracking-widest">Vision</h3>
        </div>
        <p class="text-white/55 font-['Inter'] text-sm leading-relaxed">{{ faculty.vision }}</p>
      </div>
      {% endif %}
    </div>
    {% endif %}

  </div>
</section>

<!-- ════════════════════════════════════════════
     STICKY SEARCH BAR — bg white
════════════════════════════════════════════ -->
<div class="sticky top-20 lg:top-24 z-30 bg-white/98 border-b border-gray-200 shadow-sm backdrop-blur-md" id="search-bar">
  <div class="max-w-screen-2xl mx-auto px-6 lg:px-16 py-3 flex flex-col sm:flex-row gap-3 items-center">

    <div class="relative w-full sm:w-72 lg:w-80">
      <i data-lucide="search" class="absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"></i>
      <input
        type="text"
        id="programSearch"
        placeholder="Search programs, departments…"
        class="search-input w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm font-['Inter'] text-gray-800 placeholder-gray-400 transition-all"
        aria-label="Search programs"
      >
    </div>

    <div class="flex gap-2 flex-wrap" role="group" aria-label="Filter by degree level">
      <button onclick="filterLevel('all')" class="tab-btn active text-xs font-semibold px-4 py-2 rounded-lg transition-all font-['Inter']" data-level="all">All</button>
      <button onclick="filterLevel('undergraduate')" class="tab-btn text-xs font-semibold px-4 py-2 rounded-lg border border-gray-200 text-gray-600 hover:border-[#840384] hover:text-[#840384] transition-all font-['Inter']" data-level="undergraduate">Undergraduate</button>
      <button onclick="filterLevel('postgraduate')" class="tab-btn text-xs font-semibold px-4 py-2 rounded-lg border border-gray-200 text-gray-600 hover:border-[#840384] hover:text-[#840384] transition-all font-['Inter']" data-level="postgraduate">Postgraduate</button>
      <button onclick="filterLevel('masters')" class="tab-btn text-xs font-semibold px-4 py-2 rounded-lg border border-gray-200 text-gray-600 hover:border-[#840384] hover:text-[#840384] transition-all font-['Inter']" data-level="masters">Masters</button>
      <button onclick="filterLevel('phd')" class="tab-btn text-xs font-semibold px-4 py-2 rounded-lg border border-gray-200 text-gray-600 hover:border-[#840384] hover:text-[#840384] transition-all font-['Inter']" data-level="phd">PhD</button>
    </div>

    <span id="resultCount" class="text-xs text-gray-400 font-['Inter'] whitespace-nowrap sm:ml-auto hidden sm:block"></span>
  </div>
</div>

<!-- ════════════════════════════════════════════
     SECTION 2 — DEPARTMENTS + PROGRAMS (bg gray-50)
════════════════════════════════════════════ -->
<section id="departments" class="py-20 lg:py-28 bg-gray-50" aria-label="Departments and Programs">
  <div class="max-w-screen-2xl mx-auto px-6 lg:px-16">

    <div class="flex items-end justify-between mb-12">
      <div>
        <p class="text-[#840384] font-semibold text-sm tracking-widest uppercase mb-2 font-['Inter']">Explore</p>
        <h2 class="font-['Poppins'] text-4xl lg:text-5xl font-black text-gray-900">Departments &amp; Programs</h2>
      </div>
      <span class="hidden md:block text-gray-400 text-sm font-['Inter']">
        {{ departments|length }} department{% if departments|length != 1 %}s{% endif %}
      </span>
    </div>

    {% if departments %}
    <div id="deptList" class="space-y-5">
      {% for dept in departments %}
      <div class="dept-accordion-item glass-card rounded-3xl overflow-hidden border border-gray-100"
           data-dept="{{ dept.name|lower }}"
           data-programs="{% for prog in dept.active_programs %}{{ prog.name|lower }} {{ prog.degree_level|lower }} {% endfor %}">

        <button
          onclick="toggleAccordion(this)"
          aria-expanded="false"
          class="w-full flex items-center justify-between gap-4 px-7 py-6 text-left hover:bg-purple-50/50 transition-colors group"
        >
          <div class="flex items-center gap-4">
            <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-100 to-fuchsia-100 flex items-center justify-center flex-shrink-0 group-hover:from-purple-200 group-hover:to-fuchsia-200 transition-all">
              <i data-lucide="layers" class="w-5 h-5 text-[#840384]"></i>
            </div>
            <div class="text-left">
              <div class="flex items-center gap-3 flex-wrap">
                <h3 class="font-['Poppins'] text-lg font-bold text-gray-900 group-hover:text-[#840384] transition-colors">{{ dept.name }}</h3>
                <span class="bg-purple-50 text-[#840384] text-xs font-bold px-2.5 py-1 rounded-lg tracking-wide border border-purple-100">{{ dept.code }}</span>
              </div>
              {% if dept.description %}
              <p class="text-gray-500 text-sm mt-0.5 font-['Inter'] line-clamp-1">{{ dept.description }}</p>
              {% endif %}
            </div>
          </div>
          <div class="flex items-center gap-3 flex-shrink-0">
            <span class="text-xs text-gray-400 font-medium font-['Inter']">{{ dept.active_programs|length }} program{% if dept.active_programs|length != 1 %}s{% endif %}</span>
            <div class="w-8 h-8 rounded-xl bg-gray-100 group-hover:bg-purple-100 flex items-center justify-center transition-colors">
              <i data-lucide="chevron-down" class="w-4 h-4 text-gray-500 rotate-icon"></i>
            </div>
          </div>
        </button>

        <div class="accordion-body border-t border-gray-100">
          <div class="px-7 py-6">
            {% if dept.active_programs %}
            <div class="space-y-2.5">
              {% for program in dept.active_programs %}
              <a href="{% url 'eduweb:program_detail' program.slug %}"
                 class="program-row flex items-center justify-between gap-4 px-5 py-4 rounded-2xl bg-gray-50 hover:bg-white transition-all group/prog focus:outline-none focus:ring-2 focus:ring-purple-200"
                 data-level="{{ program.degree_level }}"
                 data-name="{{ program.name|lower }}">
                <div class="flex items-center gap-4 min-w-0">
                  <div class="w-9 h-9 rounded-xl bg-white border border-gray-200 flex items-center justify-center flex-shrink-0 shadow-sm group-hover/prog:border-purple-200 transition-colors">
                    <i data-lucide="book-open" class="w-4 h-4 text-[#840384]"></i>
                  </div>
                  <div class="min-w-0">
                    <div class="font-['Poppins'] font-semibold text-gray-800 text-sm group-hover/prog:text-[#840384] transition-colors truncate">{{ program.name }}</div>
                    <div class="flex items-center gap-2 mt-0.5 flex-wrap">
                      <span class="badge-level {% if program.degree_level == 'undergraduate' %}bg-blue-50 text-blue-700{% elif program.degree_level == 'postgraduate' or program.degree_level == 'masters' %}bg-purple-50 text-purple-700{% elif program.degree_level == 'phd' %}bg-rose-50 text-rose-700{% else %}bg-gray-100 text-gray-600{% endif %} px-2 py-0.5 rounded-md">
                        {{ program.get_degree_level_display }}
                      </span>
                      {% if program.duration_years %}
                      <span class="text-gray-400 text-xs font-['Inter']">{{ program.duration_years }} yr{% if program.duration_years > 1 %}s{% endif %}</span>
                      {% endif %}
                      {% if program.available_study_modes %}
                      <span class="text-gray-300 text-xs">•</span>
                      {% for mode in program.available_study_modes %}
                      <span class="text-gray-400 text-xs font-['Inter']">{{ mode|title }}</span>{% if not forloop.last %}<span class="text-gray-300 text-xs">/</span>{% endif %}
                      {% endfor %}
                      {% endif %}
                    </div>
                  </div>
                </div>
                <div class="flex items-center gap-4 flex-shrink-0">
                  {% if program.tuition_fee %}
                  <div class="hidden sm:block text-right">
                    <div class="text-xs text-gray-400 font-['Inter']">Tuition / yr</div>
                    <div class="font-['Poppins'] font-bold text-gray-800 text-sm">${{ program.tuition_fee|floatformat:"0" }}</div>
                  </div>
                  {% endif %}
                  <div class="w-8 h-8 rounded-xl bg-white border border-gray-200 flex items-center justify-center shadow-sm group-hover/prog:bg-[#840384] group-hover/prog:border-[#840384] transition-all">
                    <i data-lucide="arrow-right" class="w-3.5 h-3.5 text-gray-500 group-hover/prog:text-white transition-colors"></i>
                  </div>
                </div>
              </a>
              {% endfor %}
            </div>
            {% else %}
            <p class="text-gray-400 text-sm font-['Inter'] italic py-4 text-center">No programs available for this department.</p>
            {% endif %}
          </div>
        </div>

      </div>
      {% endfor %}
    </div>

    <div id="noResults" class="hidden text-center py-24">
      <div class="w-16 h-16 bg-gray-100 rounded-3xl flex items-center justify-center mx-auto mb-4">
        <i data-lucide="search-x" class="w-7 h-7 text-gray-400"></i>
      </div>
      <h3 class="font-['Poppins'] text-xl font-bold text-gray-700 mb-2">No programs found</h3>
      <p class="text-gray-400 font-['Inter'] text-sm">Try a different search term or filter.</p>
    </div>

    {% else %}
    <div class="text-center py-24 glass-card rounded-3xl border border-gray-100">
      <i data-lucide="inbox" class="w-12 h-12 text-gray-300 mx-auto mb-4"></i>
      <p class="text-gray-400 font-['Inter']">No departments found for this faculty.</p>
    </div>
    {% endif %}

  </div>
</section>

<!-- ════════════════════════════════════════════
     SECTION 3 — WHY CHOOSE US + ACCREDITATION (bg white)
     Accreditation shown ONCE only, as a banner at the bottom.
════════════════════════════════════════════ -->
{% if faculty.special_features or faculty.accreditation %}
<section class="py-20 lg:py-28 bg-white" aria-label="Why Choose Us and Accreditation">
  <div class="max-w-screen-2xl mx-auto px-6 lg:px-16">

    <div class="text-center mb-14">
      <p class="text-[#840384] font-semibold text-sm tracking-widest uppercase mb-3 font-['Inter']">Why Choose Us</p>
      <h2 class="font-['Poppins'] text-4xl lg:text-5xl font-black text-gray-900 mb-4">What Sets Us Apart</h2>
      {% if faculty.tagline %}
      <p class="text-gray-500 font-['Inter'] text-lg max-w-2xl mx-auto leading-relaxed">{{ faculty.tagline }}</p>
      {% endif %}
    </div>

    {% if faculty.special_features %}
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 {% if faculty.accreditation %}mb-14{% endif %}">
      {% for feature in faculty.special_features %}
      <div class="rounded-3xl p-8 bg-gray-50 border border-gray-100 hover:bg-purple-50 hover:border-purple-200 transition-all group">
        <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center mb-5 shadow-sm group-hover:bg-[#840384] group-hover:shadow-md transition-all">
          <i data-lucide="star" class="w-5 h-5 text-[#840384] group-hover:text-white transition-colors"></i>
        </div>
        <p class="text-gray-700 font-['Inter'] leading-relaxed">{{ feature }}</p>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Accreditation banner — shown exactly ONCE -->
    {% if faculty.accreditation %}
    <div class="relative overflow-hidden rounded-3xl bg-gradient-to-r from-purple-50 via-fuchsia-50 to-purple-50 border border-purple-100 px-8 py-8 md:px-12 md:py-10">
      <div class="absolute top-0 right-0 w-56 h-56 bg-purple-200/25 rounded-full -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
      <div class="relative flex flex-col sm:flex-row items-start sm:items-center gap-6">
        <div class="w-16 h-16 bg-gradient-to-br from-[#840384] to-purple-600 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg shadow-purple-300/40">
          <i data-lucide="shield-check" class="w-7 h-7 text-white"></i>
        </div>
        <div class="flex-1 min-w-0">
          <p class="text-[#840384] text-xs font-bold tracking-widest uppercase mb-1.5 font-['Inter']">Accreditation &amp; Recognition</p>
          <p class="font-['Poppins'] text-xl lg:text-2xl font-bold text-gray-900 mb-2">Officially Accredited &amp; Globally Recognised</p>
          <p class="text-gray-600 font-['Inter'] leading-relaxed max-w-2xl">{{ faculty.accreditation }}</p>
        </div>
        <a href="{% url 'eduweb:apply' %}"
           class="inline-flex items-center gap-2 bg-[#840384] hover:bg-purple-700 text-white px-7 py-3.5 rounded-xl font-semibold text-sm transition-all flex-shrink-0 shadow-md shadow-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400">
          <i data-lucide="graduation-cap" class="w-4 h-4"></i> Apply Now
        </a>
      </div>
    </div>
    {% endif %}

  </div>
</section>
{% endif %}

<!-- ════════════════════════════════════════════
     SECTION 4 — CTA (bg deep dark purple)
════════════════════════════════════════════ -->
<section class="py-20 lg:py-24" aria-label="Call to Action">
  <div class="max-w-screen-2xl mx-auto px-6 lg:px-16">
    <div class="relative overflow-hidden rounded-3xl bg-gradient-to-r from-[#840384] via-purple-700 to-fuchsia-700 px-10 py-14 md:px-16 md:py-16">
      <div class="absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
      <div class="absolute bottom-0 left-0 w-64 h-64 bg-white/5 rounded-full translate-y-1/2 -translate-x-1/2 pointer-events-none"></div>
      <div class="absolute inset-0 pointer-events-none opacity-[0.04]"
           style="background-image:url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2260%22 height=%2260%22><circle cx=%221%22 cy=%221%22 r=%221%22 fill=%22white%22/></svg>');"></div>

      <div class="relative flex flex-col lg:flex-row items-center justify-between gap-10">
        <div class="max-w-xl">
          <div class="inline-flex items-center gap-2 bg-white/15 border border-white/20 text-white/80 px-4 py-1.5 rounded-full text-xs font-semibold tracking-widest uppercase mb-6 font-['Inter']">
            <i data-lucide="rocket" class="w-3.5 h-3.5 text-yellow-300"></i>
            Start Your Journey
          </div>
          <h2 class="font-['Poppins'] text-3xl md:text-4xl lg:text-5xl font-black text-white leading-tight mb-4">
            Ready to Join <span class="text-yellow-300">{{ faculty.code }}</span>?
          </h2>
          <p class="text-purple-200 font-['Inter'] text-base lg:text-lg leading-relaxed">
            Apply today and become part of a community built for excellence and real-world impact.
          </p>
        </div>
        <div class="flex flex-col sm:flex-row lg:flex-col gap-3 flex-shrink-0 w-full sm:w-auto lg:w-60">
          <a href="{% url 'eduweb:apply' %}"
             class="inline-flex items-center justify-center gap-2 bg-white text-[#840384] hover:bg-yellow-300 hover:text-gray-900 px-7 py-4 rounded-xl font-bold text-sm transition-all shadow-xl focus:outline-none focus:ring-2 focus:ring-yellow-300">
            <i data-lucide="send" class="w-4 h-4"></i> Apply Now
          </a>
          <a href="{% url 'eduweb:admission_requirement' %}"
             class="inline-flex items-center justify-center gap-2 bg-white/15 hover:bg-white/25 text-white border border-white/30 px-7 py-4 rounded-xl font-semibold text-sm transition-all focus:outline-none focus:ring-2 focus:ring-white/40">
            <i data-lucide="file-text" class="w-4 h-4"></i> View Requirements
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
function toggleAccordion(btn) {
  const body = btn.nextElementSibling;
  const icon = btn.querySelector('.rotate-icon');
  const open = body.classList.contains('open');
  body.classList.toggle('open', !open);
  icon.classList.toggle('open', !open);
  btn.setAttribute('aria-expanded', String(!open));
}

function filterLevel(level) {
  document.querySelectorAll('.tab-btn').forEach(b => {
    b.classList.toggle('active', b.dataset.level === level);
    if (!b.classList.contains('active')) {
      b.classList.add('border', 'border-gray-200', 'text-gray-600');
    } else {
      b.classList.remove('border', 'border-gray-200', 'text-gray-600');
    }
  });
  runFilter();
}

document.getElementById('programSearch').addEventListener('input', runFilter);

function runFilter() {
  const query  = document.getElementById('programSearch').value.toLowerCase().trim();
  const level  = document.querySelector('.tab-btn.active')?.dataset.level || 'all';
  let   total  = 0;
  let   visibleDepts = 0;

  document.querySelectorAll('.dept-accordion-item').forEach(dept => {
    const rows  = dept.querySelectorAll('a[data-level]');
    let   anyVis = false;

    rows.forEach(row => {
      const nameMatch  = row.dataset.name.includes(query);
      const levelMatch = level === 'all' || row.dataset.level === level;
      const vis = nameMatch && levelMatch;
      row.style.display = vis ? '' : 'none';
      if (vis) { anyVis = true; total++; }
    });

    const deptNameMatch = dept.dataset.dept.includes(query);
    if (deptNameMatch && level === 'all') {
      rows.forEach(r => r.style.display = '');
      anyVis = true;
    }

    dept.style.display = anyVis ? '' : 'none';
    if (anyVis) visibleDepts++;

    if (query && anyVis) {
      const body = dept.querySelector('.accordion-body');
      const icon = dept.querySelector('.rotate-icon');
      body.classList.add('open');
      icon.classList.add('open');
    }
  });

  const rc = document.getElementById('resultCount');
  rc.textContent = query || level !== 'all'
    ? `${total} program${total !== 1 ? 's' : ''} found`
    : '';

  document.getElementById('noResults').classList.toggle('hidden', visibleDepts > 0);
}

lucide.createIcons();
</script>
{% endblock %}